<%- include('partials/header.ejs', { lists: lists, currentList: list._id }) -%>

<h1><%= list.name %></h1>
<div class="list-group">
  <% list.items.forEach(item => { %>
    <li class="list-group-item my-list-item">
      <% const checked = item.finished ? "checked" : ""; %>
      <% if (editId == item._id ) { %>
        <%- include('partials/item.edit.form.ejs', { itemId: item._id, item: item.name, listId: list._id }) -%>
      <% } else { %>
        <span >
          <%- include('partials/item.check.form.ejs', {id: item._id, list: list.name, checked: checked }) -%>
          <span class=<%= checked %>>
            <%= item.name %>
          </span>
        </span>
      <% } %>
        <span>
          <span><a class="btn btn-primary" href="/edit/<%= item._id %>/<%= list._id %>">Edit</a></span>
          <span><a class="btn btn-danger" href="/delete/<%= item._id %>/<%= list._id %>">Delete</a></span>
        </span>
    </li>
  <% }) %>
  <li class="list-group-item list-group-item-action">
    <%- include('partials/item.add.form.ejs', { currentList: list._id }) -%>
  </li>
</div>

<a class="btn btn-danger btn-delete-list" href="/deleteList/<%= list._id %>">Delete list</a>

<%- include('partials/footer.ejs') -%>